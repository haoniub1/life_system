# 🎮 人生RPG系统 - 启动说明

## ✅ 已完成的集成

### 用进废退机制 (Use It Or Lose It)

我已经将"用进废退"机制完全集成到系统中了！

#### 核心功能：

1. **自动衰退检测**
   - 每次打开应用时自动检查属性是否需要衰退
   - 在 `app/page.tsx` 的 `useEffect` 中调用 `applyDecay()`

2. **活动追踪**
   - 记录运动 → 更新 `lastExercise` 日期
   - 记录学习 → 更新 `lastMental` 日期
   - 记录优质睡眠(≥8分) → 更新 `lastGoodSleep` 日期

3. **衰退规则**
   - 💪 **力量**：3天不运动开始衰退 -0.2/天
   - 🧠 **智力**：3天不学习开始衰退 -0.2/天
   - ✨ **精神**：2天没优质睡眠开始衰退 -0.3/天（衰退更快）
   - ❤️ **体力**：7天不运动才开始衰退 -0.1/天（衰退最慢）

4. **可视化警告**
   - 页面上方会显示 `DecayWarning` 组件
   - 绿色 ✅ = 保持使用中
   - 黄色 ⚠️ = 明天开始衰退
   - 红色 🔻 = 正在衰退中

---

## 🚀 如何启动应用

### 方法1：在你的Mac终端中运行

1. 打开终端（Terminal）
2. 进入项目目录：
   ```bash
   cd /Users/henry/data/codes/life_syetem
   ```

3. 启动开发服务器：
   ```bash
   npm run dev
   ```

4. 等待编译完成（第一次可能需要30秒-1分钟）

5. 打开浏览器访问：**http://localhost:3000**

**注意：** 我已经将Tailwind CSS从v4降级到v3.4，解决了lightningcss的native二进制兼容性问题。现在应该可以正常启动了！

---

## 🐛 如果遇到问题

### 问题1：lightningcss错误

```bash
# 解决方法：
cd /Users/henry/data/codes/life_syetem
rm -rf node_modules .next
npm install
npm rebuild lightningcss
npm run dev
```

### 问题2：端口占用

```bash
# 检查3000端口是否被占用
lsof -ti:3000

# 如果有进程，杀掉它
kill -9 $(lsof -ti:3000)

# 或者使用其他端口启动
npm run dev -- -p 3001
```

### 问题3：权限问题

如果出现"Operation not permitted"：

```bash
# 给node_modules写权限
sudo chmod -R 755 node_modules

# 或者删除后重新安装
sudo rm -rf node_modules .next
npm install
```

---

## 📊 测试"用进废退"功能

启动成功后，试试这个流程：

1. **首次打开** → 查看4个属性的初始值
2. **记录一次运动** → 能量追踪 → 选择 `exercise` 活动
3. **查看属性** → 💪力量 和 ❤️体力 应该增长了
4. **等待3天不记录运动** → 再次打开应用
5. **查看警告** → 应该看到"⚠️ 明天开始衰退"或"🔻 正在衰退中"

---

## 📁 关键文件说明

- **`lib/utils/useItOrLoseIt.ts`** - 核心算法实现
- **`lib/stores/lifeSystemStore.ts`** - 集成了 `applyDecay()` 和 `updateLastActivity()`
- **`components/DecayWarning.tsx`** - 衰退警告UI组件
- **`app/page.tsx`** - 在首页显示警告，启动时调用衰退检测

---

## 🎯 下一步建议

1. 先启动应用看看界面
2. 测试基本功能（能量记录、睡眠记录）
3. 观察经验值和等级提升
4. 等几天后再打开，测试衰退机制

如果有任何问题或想要调整衰退参数，随时告诉我！

---

**MacBook Pro完全适合开发！享受你的人生RPG之旅！** 🎮✨
